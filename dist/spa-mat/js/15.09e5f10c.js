(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"3N96":function(e,t,o){},BqvQ:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"row",staticStyle:{padding:"0"}},[o("q-page-sticky",{attrs:{position:"top-left",offset:[12,12]}},[o("q-btn-toggle",{attrs:{"toggle-color":"primary",options:[{label:"Lista",value:"one"},{label:"Cadastro",value:"two"}]},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"one"===e.visible,expression:"visible==='one'"}],staticClass:"col responsive"},[o("q-card-title",{staticClass:"text-right"},[e._v("\n          Lista Feriados\n        ")]),o("q-card-separator"),o("div",{staticClass:"fit"},[o("q-table",{ref:"table",attrs:{data:e.serverData,columns:e.columns,filter:e.filter,"filter-method":e.myFilter,loading:e.loading,selection:"single"},scopedSlots:e._u([{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{attrs:{"auto-width":""}}),o("q-td",{key:"nome",attrs:{props:t}},[e._v(e._s(t.row.nome))]),o("q-td",{key:"descricao",attrs:{props:t}},[e._v(e._s(t.row.descricao))]),o("q-td",{key:"edit",attrs:{props:t}},[o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"edit"},on:{click:function(o){e.atualizaModel(t.row)}}}),o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"delete"},on:{click:function(o){e.excluiModel(t.row.id)}}})],1)],1)]}}])})],1)],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"two"===e.visible,expression:"visible==='two'"}],staticClass:"col responsive"},[o("q-card-title",{staticClass:"text-right"},[e._v("\n    Cadastro\n    ")]),o("q-card-separator"),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Nome do feriado","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Nome",maxlength:"75"},model:{value:e.modelo.nome,callback:function(t){e.$set(e.modelo,"nome",t)},expression:"modelo.nome"}})],1)],1),o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Descrição do feriado","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Descrição",maxlength:"75"},model:{value:e.modelo.descricao,callback:function(t){e.$set(e.modelo,"descricao",t)},expression:"modelo.descricao"}})],1)],1),o("div",{staticClass:"col-12 mt-sm"},[o("q-datetime-picker",{staticClass:"fit",attrs:{type:"date"},model:{value:e.modelo.data,callback:function(t){e.$set(e.modelo,"data",t)},expression:"modelo.data"}})],1),o("div",{staticClass:"col-12 mt-sm text-center pa-sm"},[o("q-checkbox",{staticClass:"text-center",attrs:{label:"Não calcular horas extras para esse dia"},model:{value:e.modelo.conf_he,callback:function(t){e.$set(e.modelo,"conf_he",t)},expression:"modelo.conf_he"}}),o("div",[o("br"),o("p",{staticClass:"q-headline text-center"},[e._v(" Departamentos afetados")])]),o("q-table",{ref:"table",attrs:{data:e.tableDepartamento,columns:e.columns,filter:e.filter,"filter-method":e.myFilter,loading:e.loading,selection:"multiple",selected:e.modelo.departamentos},on:{"update:selected":function(t){e.$set(e.modelo,"departamentos",t)}}})],1)]),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"primary"},on:{click:e.submit}},[e._v("Gravar")])],1),o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"secondary"},on:{click:e.clear}},[e._v("Limpar")])],1)])],1)],1)},s=[];a._withStripped=!0;var i=o("vDqi"),n=o.n(i),r={data:function(){return{funcLoad:!0,localLoad:!0,locais:[],url:"",text:"",visible:"one",tableDepartamento:[],modelo:{nome:"",descricao:"",data:"",conf_he:!1,departamentos:[]},filter:"",loading:!1,serverPagination:{page:1,rowsNumber:10},serverData:[],columns:[{name:"nome",label:"Nome",field:"nome",align:"left"},{name:"descricao",label:"Descrição",field:"descricao",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}]}},computed:{buttonColor:function(){return this.$q.screen.lt.md?"primary":"secondary"}},methods:{toggleVisibility:function(){this.visible=!this.visible},submit:function(){var e=this;n()({baseURL:this.modelo.id?"https://estagio-back.herokuapp.com//feriado/"+this.modelo.id:"https://estagio-back.herokuapp.com//feriado",timeout:1e4,method:this.modelo.id?"PUT":"POST",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(this.modelo)}).then(function(t){e.request(),console.log(t),e.$q.notify({color:"positive",position:"top",message:"Gravado com sucesso",icon:"report_problem"}),e.clear()}).catch(function(t){t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers)):t.request?console.log(t.request):console.log("Error",t.message),console.log(t.config),e.$q.notify({color:"negative",position:"top",message:"Erro ao gravar",icon:"report_problem"})})},getDepartamentos:function(){var e=this;n()({method:"get",url:"https://estagio-back.herokuapp.com//departamento",headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(t){e.tableDepartamento=JSON.parse(JSON.stringify(t.data))})},clear:function(){this.modelo={nome:"",descricao:"",data:"",conf_he:!1,departamentos:[]},this.$q.notify({color:"positive",position:"top",message:"Formulário limpo",icon:"report_problem"})},fetchData:function(){},request:function(){var e=this;this.loading=!0,n.a.get("https://estagio-back.herokuapp.com//feriado").then(function(t){e.serverData=JSON.parse(JSON.stringify(t.data)),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},myFilter:function(e,t,o,a){var s=t?t.toLowerCase():"";return e.filter(function(e){return o.some(function(t){return-1!==(a(t,e)+"").toLowerCase().indexOf(s)})})},atualizaModel:function(e){var t=this;this.visible="two",this.modelo=e;for(var o=function(e){var o=t.modelo.departamentos[e];n()({method:"get",url:"https://estagio-back.herokuapp.com//departamento/"+o.id,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(o){t.modelo.departamentos[e]=JSON.parse(JSON.stringify(o.data))})},a=0;a<this.modelo.departamentos.length;a++)o(a)},excluiModel:function(e){var t=this;this.$q.dialog({title:"Excluir",message:"Confirma a exclusão?.",ok:"Confirmo",cancel:"Cancelo"}).then(function(){n()({method:"delete",url:"https://estagio-back.herokuapp.com//feriado/"+e,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){t.$q.notify({color:"positive",message:"Excluido com sucesso"}),t.request()}).catch(function(){t.$q.notify("Erro ao excluir!")})}).catch(function(){t.$q.notify({color:"positive",message:"Exclusão Cancelada..."})})}},beforeMount:function(){this.getDepartamentos(),this.fetchData(),this.request()}},l=r,c=(o("wm7q"),o("KHd+")),d=Object(c["a"])(l,a,s,!1,null,null,null);t["default"]=d.exports},wm7q:function(e,t,o){"use strict";var a=o("3N96"),s=o.n(a);s.a}}]);