(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{FXuG:function(e,o,t){"use strict";t.r(o);var a=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",[t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"},on:{click:function(o){e.opened=!0}}}),t("div",{staticClass:"fit"},[t("q-table",{ref:"table",attrs:{data:e.serverData,columns:e.columns,selection:"single"},scopedSlots:e._u([{key:"body",fn:function(o){return[t("q-tr",{attrs:{props:o}},[t("q-td",{attrs:{"auto-width":""}}),t("q-td",{key:"mensagem",attrs:{props:o}},[e._v(e._s(o.row.mensagem))]),t("q-td",{key:"edit",attrs:{props:o}},[t("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"delete"},on:{click:function(t){e.excluiModel(o.row.id)}}})],1)],1)]}}])})],1),t("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:e.opened,callback:function(o){e.opened=o},expression:"opened"}},[t("q-modal-layout",[t("q-toolbar",{attrs:{slot:"header"},slot:"header"},[t("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"keyboard_arrow_left"},on:{click:function(o){e.opened=!1}}}),t("q-toolbar-title",[e._v("\n          Envio de Mensagem\n        ")])],1),t("q-toolbar",{attrs:{slot:"footer"},slot:"footer"},[t("div",{staticClass:"row q-pa-lg gutter-sm justify-center wrap"},[t("div",{staticClass:"col-auto inline"},[t("q-btn",{attrs:{color:"secondary",label:"Enviar"},on:{click:e.salvar}})],1),t("div",{staticClass:"col-auto inline"},[t("q-btn",{attrs:{color:"negative",label:"Cancelar"},on:{click:function(o){e.opened=!1}}})],1)])]),t("div",{staticClass:"layout-padding row q-pa-lg gutter-sm"},[t("div",{staticClass:"col-12"},[t("q-field",{attrs:{helper:"Selecione o destinatário","error-label":"Some error"}},[t("q-select",{attrs:{options:e.funcionarios,disable:0===e.funcionarios.length,filter:"","autofocus-filter":"","float-label":"Funcionários"},model:{value:e.modeloLanc.destino,callback:function(o){e.$set(e.modeloLanc,"destino",o)},expression:"modeloLanc.destino"}})],1)],1),t("div",{staticClass:"col-12"},[t("q-field",{attrs:{count:2500,helper:"Mensagem enviada ao usaário","error-label":"Some error"}},[t("q-input",{attrs:{"float-label":"Mensagem:",maxlength:"2500",type:"textarea"},model:{value:e.modeloLanc.mensagem,callback:function(o){e.$set(e.modeloLanc,"mensagem",o)},expression:"modeloLanc.mensagem"}})],1)],1)])],1)],1)],1)},n=[];a._withStripped=!0;var s=t("vDqi"),i=t.n(s),l={data:function(){return{modeloLanc:{origem:"",destino:"",mensagem:"",data:new Date,lido:!1},funcionarios:[],opened:!1,columns:[{name:"mensagem",label:"Mensagem",field:"mensagem",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}],serverData:[],mensagens:[]}},methods:{salvar:function(){var e=this;this.modeloLanc.origem=this.$store.state.user,i()({baseURL:this.modeloLanc.id?"https://estagio-back.herokuapp.com//mensagem/"+this.modeloLanc.id:"https://estagio-back.herokuapp.com//mensagem",timeout:1e4,method:this.modeloLanc.id?"PUT":"POST",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(this.modeloLanc)}).then(function(o){e.atualizaMensagem(),console.log(o),e.$q.notify({color:"positive",position:"top",message:"Enviado com sucesso",icon:"report_problem"}),e.opened=!1,e.clear()}).catch(function(o){o.response?(console.log(o.response.data),console.log(o.response.status),console.log(o.response.headers)):o.request?console.log(o.request):console.log("Error",o.message),console.log(o.config),e.$q.notify({color:"negative",position:"top",message:"Erro ao Enviar",icon:"report_problem"})})},atualizaModel:function(){var e=this;i.a.get("https://estagio-back.herokuapp.com//funcionario").then(function(o){e.funcionarios=[];for(var t=JSON.parse(JSON.stringify(o.data)),a=0;a<t.length;a++){var n=t[a];e.funcionarios.push({label:n.nome,value:n})}}).catch(function(o){e.funcionarios=[{nome:"teste",descricao:"error"}],console.log(o)})},atualizaMensagem:function(){var e=this;i.a.get("https://estagio-back.herokuapp.com//mensagem").then(function(o){e.mensagens=[],e.serverData=JSON.parse(JSON.stringify(o.data))}).catch(function(o){e.funcionarios=[{nome:"teste",descricao:"error"}],console.log(o)})},excluiModel:function(e){var o=this;this.$q.dialog({title:"Excluir",message:"Confirma a exclusão?.",ok:"Confirmo",cancel:"Cancelo"}).then(function(){i()({method:"delete",url:"https://estagio-back.herokuapp.com//mensagem/"+e,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){o.$q.notify({color:"positive",message:"Excluido com sucesso"}),o.atualizaMensagem()}).catch(function(){o.$q.notify("Erro ao excluir!")})}).catch(function(){o.$q.notify({color:"positive",message:"Exclusão Cancelada..."})})},clear:function(){this.modeloLanc={origem:"",destino:"",mensagem:"",data:new Date,lido:!1}}},beforeMount:function(){this.atualizaModel(),this.atualizaMensagem()}},r=l,c=t("KHd+"),d=Object(c["a"])(r,a,n,!1,null,null,null);o["default"]=d.exports}}]);