(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"+M7S":function(t,e,o){},ND5R:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("q-page",{staticClass:"row",staticStyle:{padding:"0"}},[o("q-page-sticky",{attrs:{position:"top-left",offset:[12,12]}}),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"one"===t.visible,expression:"visible==='one'"}],staticClass:"col responsive"},[o("q-btn-toggle",{staticClass:"q-mt-md q-ml-md",attrs:{"toggle-color":"primary",options:[{label:"Lista",value:"one"},{label:"Cadastro",value:"two"}]},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}}),o("q-card-title",{staticClass:"text-right"},[t._v("\n          Lista Jornada\n        ")]),o("q-card-separator"),o("div",{staticClass:"fit"},[o("q-table",{ref:"table",attrs:{data:t.serverData,columns:t.columns,filter:t.filter,"filter-method":t.myFilter,loading:t.loading,selection:"single"},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{attrs:{"auto-width":""}}),o("q-td",{key:"nome",attrs:{props:e}},[t._v(t._s(e.row.nome))]),o("q-td",{key:"edit",attrs:{props:e}},[o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"edit"},on:{click:function(o){t.atualizaModel(e.row)}}}),o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"delete"},on:{click:function(o){t.excluiModel(e.row.id)}}})],1)],1)]}}])})],1)],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"two"===t.visible,expression:"visible==='two'"}],staticClass:"col responsive"},[o("q-btn-toggle",{staticClass:"q-ma-md",attrs:{"toggle-color":"primary",options:[{label:"Lista",value:"one"},{label:"Cadastro",value:"two"}]},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}}),o("q-tabs",{staticClass:"col responsive",attrs:{inverted:""},model:{value:t.tabsModel,callback:function(e){t.tabsModel=e},expression:"tabsModel"}},[o("q-tab",{attrs:{slot:"title",name:"xtab-1",icon:"today",label:"Mensal"},slot:"title"}),o("q-tab",{attrs:{slot:"title",name:"xtab-2",icon:"access_alarm",label:"Semanal"},slot:"title"}),o("q-tab",{attrs:{slot:"title",name:"xtab-3",icon:"update",label:"12x36"},slot:"title"}),o("q-tab-pane",{attrs:{name:"xtab-1"}},[o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Nome da jornada","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Nome",maxlength:"75"},model:{value:t.modelo.nome,callback:function(e){t.$set(t.modelo,"nome",e)},expression:"modelo.nome"}})],1)],1),o("div",{staticClass:"col-12"}),o("div",{staticClass:"col-12 mt-sm row q-pa-lg gutter-sm"},[o("div",{staticClass:"col-xs-12 col-sm-6 mt-sm"},[o("q-field",{attrs:{label:"Escala"}},[o("v-calendar",{staticStyle:{width:"100%"},attrs:{attributes:t.attrs}})],1),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("q-field",{attrs:{helper:"Selecione o perfil","error-label":"Some error"}},[o("q-select",{attrs:{options:t.perfilJornada,disable:0===t.perfilJornada.length,filter:"","autofocus-filter":"","float-label":"Perfil"},model:{value:t.modelo.perfil,callback:function(e){t.$set(t.modelo,"perfil",e)},expression:"modelo.perfil"}})],1)],1)])],1),o("div",{staticClass:"col-xs-12 col-sm-6 mt-sm"},[o("q-field",{attrs:{label:"Seleção"}},[o("v-date-picker",{attrs:{mode:"multiple","is-inline":"true"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.inputValue;e.updateValue;return o("input",{attrs:{type:"text"},domProps:{value:a},on:{change:function(e){t.console.log("teste")}}})}}]),model:{value:t.myDate,callback:function(e){t.myDate=e},expression:"myDate"}})],1),o("div",{staticClass:"row justify-end"},[o("div",{staticClass:"col-12"},[o("q-field",{attrs:{helper:"Selecione o horário","error-label":"Some error"}},[o("q-select",{attrs:{options:t.horarios,disable:0===t.horarios.length,filter:"","autofocus-filter":"","float-label":"Horarios"},model:{value:t.modelo.horario,callback:function(e){t.$set(t.modelo,"horario",e)},expression:"modelo.horario"}})],1)],1)]),o("div",{staticClass:"row justify-end"},[o("q-btn",{staticClass:"col-sm-12 col-md-6 q-mt-sm",attrs:{label:"Inserir",icon:"chevron_left",color:"primary",disable:!this.modelo.horario},on:{click:function(e){t.teste()}}})],1)],1)])]),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"primary"},on:{click:t.submit}},[t._v("Gravar")])],1),o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"secondary"},on:{click:t.clear}},[t._v("Limpar")])],1)])]),o("q-tab-pane",{attrs:{name:"xtab-2"}},[t._v("Tab Two")]),o("q-tab-pane",{attrs:{name:"xtab-3"}},[t._v("Tab Three")])],1)],1)],1)},s=[];a._withStripped=!0;o("rGqo"),o("Z2Ku"),o("L9s1");var i=o("vDqi"),r=o.n(i),l=o("4IOb"),n={data:function(){return{horarios:[],perfilJornada:[],selectedDate:null,myDate:null,usedDates:[],formats:{title:"MMMM YYYY",weekdays:"W",navMonths:"MMM",input:["L","YYYY-MM-DD","YYYY/MM/DD"],dayPopover:"L",data:["L","YYYY-MM-DD","YYYY/MM/DD"]},attrs:[],funcLoad:!0,localLoad:!0,locais:[],url:"",text:"",visible:"one",tableDepartamento:[],modelo:{listaHorarios:[],perfil:"",horario:"",nome:""},filter:"",loading:!1,serverPagination:{page:1,rowsNumber:10},serverData:[],columns:[{name:"nome",label:"Nome",field:"nome",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}]}},computed:{buttonColor:function(){return this.$q.screen.lt.md?"primary":"secondary"},inputState:function(){return this.selectedValue?{type:"is-primary",message:""}:{type:"is-danger",message:"Date required."}}},methods:{teste:function(){for(var t=0;t<this.myDate.length;t++){var e=this.myDate[t];if(this.usedDates.includes(e))return void this.$q.notify({color:"negative",message:"Dia "+l["date"].formatDate(e,"DD/MM/YYYY")+" em duplicidade, favor rever a seleção."})}for(var o=!1,a=0;a<this.attrs.length;a++){var s=this.attrs[a];if(s.key===this.modelo.horario){s.dates=s.dates.concat(this.myDate),this.usedDates=this.usedDates.concat(this.myDate),o=!0;break}}o||(this.usedDates=this.usedDates.concat(this.myDate),this.attrs.push({key:this.modelo.horario,highlight:{backgroundColor:this.getRandomColor()},dates:[].concat(this.myDate),popover:{label:this.modelo.horario.nome}}))},getRandomColor:function(){for(var t="0123456789ABCDEF",e="#",o=0;o<6;o++)e+=t[Math.floor(16*Math.random())];return e},toggleVisibility:function(){this.visible=!this.visible},submit:function(){var t=this;this.modelo.listaHorarios=[],this.attrs.forEach(function(e){e.dates.forEach(function(o){t.modelo.listaHorarios.push({data:o,horario:e.key})})}),r()({baseURL:this.modelo.id?"https://estagio-back.herokuapp.com//jornadamensal/"+this.modelo.id:"https://estagio-back.herokuapp.com//jornadamensal",timeout:1e4,method:this.modelo.id?"PUT":"POST",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(this.modelo)}).then(function(e){t.request(),console.log(e),t.$q.notify({color:"positive",position:"top",message:"Gravado com sucesso",icon:"report_problem"}),t.clear()}).catch(function(e){e.response?(console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers)):e.request?console.log(e.request):console.log("Error",e.message),console.log(e.config),t.$q.notify({color:"negative",position:"top",message:"Erro ao gravar",icon:"report_problem"})})},getHorarios:function(){var t=this;r()({method:"get",url:"https://estagio-back.herokuapp.com//horario",headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){t.horarios=[];for(var o=JSON.parse(JSON.stringify(e.data)),a=0;a<o.length;a++){var s=o[a];t.horarios.push({label:s.nome,value:s})}})},getPerfil:function(){var t=this;r()({method:"get",url:"https://estagio-back.herokuapp.com//perfiljornada",headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){t.perfilJornada=[];for(var o=JSON.parse(JSON.stringify(e.data)),a=0;a<o.length;a++){var s=o[a];t.perfilJornada.push({label:s.nome,value:s})}})},clear:function(){this.modelo={listaHorarios:[],perfil:"",horario:"",nome:""},this.usedDates=[],this.attrs=[],this.myDate=[],this.$q.notify({color:"positive",position:"top",message:"Formulário limpo",icon:"report_problem"})},fetchData:function(){},request:function(){var t=this;this.loading=!0,r.a.get("https://estagio-back.herokuapp.com//jornada").then(function(e){t.serverData=JSON.parse(JSON.stringify(e.data)),t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},myFilter:function(t,e,o,a){var s=e?e.toLowerCase():"";return t.filter(function(t){return o.some(function(e){return-1!==(a(e,t)+"").toLowerCase().indexOf(s)})})},atualizaModel:function(t){var e=this;this.visible="two",this.modelo.listaHorarios=[],this.modelo=t;for(var o=0;o<this.modelo.listaHorarios.length;o++){var a=this.modelo.listaHorarios[o];r()({method:"get",url:"https://estagio-back.herokuapp.com//jornadamensalitem/"+a.id,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(t){e.modelo.listaHorarios.push(JSON.parse(JSON.stringify(t.data)))})}for(var s=0;s<this.modelo.listaHorarios.length;s++){for(var i=this.modelo.listaHorarios[s],l=!1,n=0;n<this.attrs.length;n++){var c=this.attrs[n];if(c.key===this.elementPai.horario){c.dates=c.dates.concat(i.data),this.usedDates=this.usedDates.concat(i.data),l=!0;break}}l||(this.usedDates=this.usedDates.concat(i.data),this.attrs.push({key:i.horario,highlight:{backgroundColor:this.getRandomColor()},dates:[].concat(i.data),popover:{label:i.horario.nome}}))}},excluiModel:function(t){var e=this;this.$q.dialog({title:"Excluir",message:"Confirma a exclusão?.",ok:"Confirmo",cancel:"Cancelo"}).then(function(){r()({method:"delete",url:"https://estagio-back.herokuapp.com//jornada/"+t,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(t){e.$q.notify({color:"positive",message:"Excluido com sucesso"}),e.request()}).catch(function(){e.$q.notify("Erro ao excluir!")})}).catch(function(){e.$q.notify({color:"positive",message:"Exclusão Cancelada..."})})}},beforeMount:function(){this.getHorarios(),this.getPerfil(),this.fetchData(),this.request()}},c=n,d=(o("XOBg"),o("KHd+")),u=Object(d["a"])(c,a,s,!1,null,null,null);e["default"]=u.exports},XOBg:function(t,e,o){"use strict";var a=o("+M7S"),s=o.n(a);s.a}}]);