(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{"9E8p":function(e,t,o){"use strict";var a=o("zylg"),i=o.n(a);i.a},vmoS:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"row",staticStyle:{padding:"0"}},[o("q-page-sticky",{attrs:{position:"top-left",offset:[12,12]}},[o("q-btn-toggle",{attrs:{"toggle-color":"primary",options:[{label:"Lista",value:"one"},{label:"Cadastro",value:"two"}]},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"one"===e.visible,expression:"visible==='one'"}],staticClass:"col responsive"},[o("q-card-title",{staticClass:"text-right"},[e._v("\n          Lista Justificativas\n        ")]),o("q-card-separator"),o("div",{staticClass:"fit"},[o("q-table",{ref:"table",attrs:{data:e.serverData,columns:e.columns,filter:e.filter,"filter-method":e.myFilter,loading:e.loading,selection:"single"},scopedSlots:e._u([{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{attrs:{"auto-width":""}}),o("q-td",{key:"nome",attrs:{props:t}},[e._v(e._s(t.row.nome))]),o("q-td",{key:"descricao",attrs:{props:t}},[e._v(e._s(t.row.descricao))]),o("q-td",{key:"edit",attrs:{props:t}},[o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"edit"},on:{click:function(o){e.atualizaModel(t.row)}}}),o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"delete"},on:{click:function(o){e.excluiModel(t.row.id)}}})],1)],1)]}}])})],1)],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"two"===e.visible,expression:"visible==='two'"}],staticClass:"col responsive"},[o("q-card-title",{staticClass:"text-right"},[e._v("\n    Cadastro\n    ")]),o("q-card-separator"),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Nome da Justificativa","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Nome",maxlength:"75"},model:{value:e.modelo.nome,callback:function(t){e.$set(e.modelo,"nome",t)},expression:"modelo.nome"}})],1)],1),o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Descrição da Justificativa","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Descrição",maxlength:"75"},model:{value:e.modelo.descricao,callback:function(t){e.$set(e.modelo,"descricao",t)},expression:"modelo.descricao"}})],1)],1),o("div",{staticClass:"col-12 mt-sm"},[o("q-list",{attrs:{link:""}},[o("q-item",{attrs:{tag:"label"}},[o("q-item-side",[o("q-checkbox",{model:{value:e.modelo.conf_desc_bh,callback:function(t){e.$set(e.modelo,"conf_desc_bh",t)},expression:"modelo.conf_desc_bh"}})],1),o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[e._v("Descontar horas do banco de horas")])],1)],1),o("q-item",{attrs:{tag:"label"}},[o("q-item-side",[o("q-checkbox",{model:{value:e.modelo.conf_desc_falta,callback:function(t){e.$set(e.modelo,"conf_desc_falta",t)},expression:"modelo.conf_desc_falta"}})],1),o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[e._v("Descontar como horas falta")])],1)],1),o("q-item",{attrs:{tag:"label",multiline:""}},[o("q-item-side",[o("q-checkbox",{model:{value:e.modelo.conf_abon_falta,callback:function(t){e.$set(e.modelo,"conf_abon_falta",t)},expression:"modelo.conf_abon_falta"}})],1),o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[e._v("Abonar horas")])],1)],1)],1)],1)]),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"primary"},on:{click:e.submit}},[e._v("Gravar")])],1),o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"secondary"},on:{click:e.clear}},[e._v("Limpar")])],1)])],1)],1)},i=[];a._withStripped=!0;var s=o("vDqi"),l=o.n(s),n={data:function(){return{funcLoad:!0,localLoad:!0,locais:[],url:"",text:"",visible:"one",responsaveis:[],modelo:{nome:"",descricao:"",conf_desc_bh:!1,conf_desc_falta:!1,conf_abon_falta:!1},filter:"",loading:!1,serverPagination:{page:1,rowsNumber:10},serverData:[],columns:[{name:"nome",label:"Nome",field:"nome",align:"left"},{name:"descricao",label:"Descrição",field:"descricao",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}]}},computed:{buttonColor:function(){return this.$q.screen.lt.md?"primary":"secondary"}},methods:{toggleVisibility:function(){this.visible=!this.visible},submit:function(){var e=this;l()({baseURL:this.modelo.id?"https://estagio-back.herokuapp.com//justificativa/"+this.modelo.id:"https://estagio-back.herokuapp.com//justificativa",timeout:1e4,method:this.modelo.id?"PUT":"POST",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(this.modelo)}).then(function(t){e.request(),console.log(t),e.$q.notify({color:"positive",position:"top",message:"Gravado com sucesso",icon:"report_problem"}),e.clear()}).catch(function(t){t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers)):t.request?console.log(t.request):console.log("Error",t.message),console.log(t.config),e.$q.notify({color:"negative",position:"top",message:"Erro ao gravar",icon:"report_problem"})})},clear:function(){this.modelo={nome:"",descricao:"",conf_desc_bh:!1,conf_desc_falta:!1,conf_abon_falta:!1},this.$q.notify({color:"positive",position:"top",message:"Formulário limpo",icon:"report_problem"})},fetchData:function(){},request:function(){var e=this;this.loading=!0,l.a.get("https://estagio-back.herokuapp.com//justificativa").then(function(t){e.serverData=JSON.parse(JSON.stringify(t.data)),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},myFilter:function(e,t,o,a){var i=t?t.toLowerCase():"";return e.filter(function(e){return o.some(function(t){return-1!==(a(t,e)+"").toLowerCase().indexOf(i)})})},atualizaModel:function(e){this.visible="two",this.modelo=e},excluiModel:function(e){var t=this;this.$q.dialog({title:"Excluir",message:"Confirma a exclusão?.",ok:"Confirmo",cancel:"Cancelo"}).then(function(){l()({method:"delete",url:"https://estagio-back.herokuapp.com//justificativa/"+e,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){t.$q.notify({color:"positive",message:"Excluido com sucesso"}),t.request()}).catch(function(){t.$q.notify("Erro ao excluir!")})}).catch(function(){t.$q.notify({color:"positive",message:"Exclusão Cancelada..."})})}},beforeMount:function(){this.fetchData(),this.request()}},c=n,r=(o("9E8p"),o("KHd+")),d=Object(r["a"])(c,a,i,!1,null,null,null);t["default"]=d.exports},zylg:function(e,t,o){}}]);