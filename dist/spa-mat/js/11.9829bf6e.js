(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"8/1y":function(e,t,o){},qpYP:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",{staticClass:"row",staticStyle:{padding:"0"}},[o("q-page-sticky",{attrs:{position:"top-left",offset:[12,12]}},[o("q-btn-toggle",{attrs:{"toggle-color":"primary",options:[{label:"Lista",value:"one"},{label:"Cadastro",value:"two"}]},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}})],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"one"===e.visible,expression:"visible==='one'"}],staticClass:"col responsive"},[o("q-card-title",{staticClass:"text-right"},[e._v("\n          Lista Departamentos\n        ")]),o("q-card-separator"),o("div",{staticClass:"fit"},[o("q-table",{ref:"table",attrs:{data:e.serverData,columns:e.columns,filter:e.filter,"filter-method":e.myFilter,loading:e.loading,selection:"single"},scopedSlots:e._u([{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{attrs:{"auto-width":""}}),o("q-td",{key:"nome",attrs:{props:t}},[e._v(e._s(t.row.nome))]),o("q-td",{key:"descricao",attrs:{props:t}},[e._v(e._s(t.row.descricao))]),o("q-td",{key:"edit",attrs:{props:t}},[o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"edit"},on:{click:function(o){e.atualizaModel(t.row)}}}),o("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"delete"},on:{click:function(o){e.excluiModel(t.row.id)}}})],1)],1)]}}])})],1)],1),o("q-card",{directives:[{name:"show",rawName:"v-show",value:"two"===e.visible,expression:"visible==='two'"}],staticClass:"col responsive"},[o("q-card-title",{staticClass:"text-right"},[e._v("\n    Cadastro\n    ")]),o("q-card-separator"),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Nome do departamento","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Nome",maxlength:"75"},model:{value:e.modelo.nome,callback:function(t){e.$set(e.modelo,"nome",t)},expression:"modelo.nome"}})],1)],1),o("div",{staticClass:"col-12"},[o("q-field",{attrs:{count:75,helper:"Descrição do departamento","error-label":"Some error"}},[o("q-input",{attrs:{"float-label":"Descrição",maxlength:"75"},model:{value:e.modelo.descricao,callback:function(t){e.$set(e.modelo,"descricao",t)},expression:"modelo.descricao"}})],1)],1),o("div",{staticClass:"col-xs-12 col-sm-6"},[o("q-field",{attrs:{helper:"Nível hierarquico acima","error-label":"Some error"}},[o("q-select",{attrs:{options:e.departamentos,disable:e.funcLoad,filter:"","autofocus-filter":"","float-label":"Departamento acima"},model:{value:e.modelo.nivelAcima,callback:function(t){e.$set(e.modelo,"nivelAcima",t)},expression:"modelo.nivelAcima"}})],1)],1)]),o("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"primary"},on:{click:e.submit}},[e._v("Gravar")])],1),o("div",{staticClass:"col-4"},[o("q-btn",{staticClass:"fit",attrs:{color:"secondary"},on:{click:e.clear}},[e._v("Limpar")])],1)])],1)],1)},i=[];a._withStripped=!0;var s=o("vDqi"),r=o.n(s),l={data:function(){return{funcLoad:!0,localLoad:!0,locais:[],url:"",text:"",visible:"one",responsaveis:[],modelo:{nome:"",descricao:"",nivelAcima:""},filter:"",loading:!1,serverPagination:{page:1,rowsNumber:10},serverData:[],departamentos:[],columns:[{name:"nome",label:"Nome",field:"nome",align:"left"},{name:"descricao",label:"Descrição",field:"descricao",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}]}},computed:{buttonColor:function(){return this.$q.screen.lt.md?"primary":"secondary"}},methods:{toggleVisibility:function(){this.visible=!this.visible},submit:function(){var e=this;r()({baseURL:this.modelo.id?"https://estagio-back.herokuapp.com//departamento/"+this.modelo.id:"https://estagio-back.herokuapp.com//departamento",timeout:1e4,method:this.modelo.id?"PUT":"POST",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(this.modelo)}).then(function(t){e.request(),console.log(t),e.$q.notify({color:"positive",position:"top",message:"Gravado com sucesso",icon:"report_problem"}),e.clear()}).catch(function(t){t.response?(console.log(t.response.data),console.log(t.response.status),console.log(t.response.headers)):t.request?console.log(t.request):console.log("Error",t.message),console.log(t.config),e.$q.notify({color:"negative",position:"top",message:"Erro ao gravar",icon:"report_problem"})})},clear:function(){this.modelo={nome:"",descricao:"",nivelAcima:""},this.$q.notify({color:"positive",position:"top",message:"Formulário limpo",icon:"report_problem"})},fetchData:function(){},departCombobox:function(){for(var e=0;e<this.serverData.length;e++){var t=JSON.parse(JSON.stringify(this.serverData[e]));this.departamentos.push({label:t.nome,value:t})}this.funcLoad=!1},request:function(){var e=this;this.loading=!0,r.a.get("https://estagio-back.herokuapp.com//departamento").then(function(t){e.serverData=JSON.parse(JSON.stringify(t.data)),e.departCombobox(),e.loading=!1}).catch(function(t){e.serverData=[{nome:"teste",descricao:"error"}],console.log(t),e.loading=!1})},myFilter:function(e,t,o,a){var i=t?t.toLowerCase():"";return e.filter(function(e){return o.some(function(t){return-1!==(a(t,e)+"").toLowerCase().indexOf(i)})})},atualizaModel:function(e){this.visible="two",this.modelo=e;for(var t=0,o=!0;t<this.departamentos.length&&o;t++)this.departamentos[t].value.id===this.modelo.nivelAcima.id&&(this.modelo.nivelAcima=this.departamentos[t].value,o=!1)},excluiModel:function(e){var t=this;this.$q.dialog({title:"Excluir",message:"Confirma a exclusão?.",ok:"Confirmo",cancel:"Cancelo"}).then(function(){r()({method:"delete",url:"https://estagio-back.herokuapp.com//empresa/"+e,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){t.$q.notify({color:"positive",message:"Excluido com sucesso"}),t.request()}).catch(function(){t.$q.notify("Erro ao excluir!")})}).catch(function(){t.$q.notify({color:"positive",message:"Exclusão Cancelada..."})})}},beforeMount:function(){this.fetchData(),this.request()}},n=l,c=(o("rI4Y"),o("KHd+")),d=Object(c["a"])(n,a,i,!1,null,null,null);t["default"]=d.exports},rI4Y:function(e,t,o){"use strict";var a=o("8/1y"),i=o.n(a);i.a}}]);