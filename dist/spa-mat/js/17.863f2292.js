(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{Xk4K:function(e,o,a){"use strict";a.r(o);var t=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("q-page",{staticClass:"row",staticStyle:{padding:"0"}},[a("q-page-sticky",{attrs:{position:"top-left",offset:[12,12]}},[a("q-btn-toggle",{attrs:{"toggle-color":"primary",options:[{label:"Lista",value:"one"},{label:"Cadastro",value:"two"}]},model:{value:e.visible,callback:function(o){e.visible=o},expression:"visible"}})],1),a("q-card",{directives:[{name:"show",rawName:"v-show",value:"one"===e.visible,expression:"visible==='one'"}],staticClass:"col responsive"},[a("q-card-title",{staticClass:"text-right"},[e._v("\n          Lista Empresas\n        ")]),a("q-card-separator"),a("div",{staticClass:"fit"},[a("q-table",{ref:"table",attrs:{data:e.serverData,columns:[{name:"razao",label:"Razão Social",field:"razao",align:"left"},{name:"cnpj",label:"CNPJ",field:"cnpj",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}],filter:e.filter,"filter-method":e.myFilter,loading:e.loading,selection:"single"},scopedSlots:e._u([{key:"body",fn:function(o){return[a("q-tr",{attrs:{props:o}},[a("q-td",{attrs:{"auto-width":""}}),a("q-td",{key:"razao",attrs:{props:o}},[e._v(e._s(o.row.razao))]),a("q-td",{key:"cnpj",attrs:{props:o}},[e._v(e._s(o.row.cnpj))]),a("q-td",{key:"edit",attrs:{props:o}},[a("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"edit"},on:{click:function(a){e.atualizaModel(o.row)}}}),a("q-btn",{attrs:{flat:"",round:"",dense:"",dark:"",icon:"delete"},on:{click:function(a){e.excluiModel(o.row.id)}}})],1)],1)]}}])})],1)],1),a("q-card",{directives:[{name:"show",rawName:"v-show",value:"two"===e.visible,expression:"visible==='two'"}],staticClass:"col responsive"},[a("q-card-title",{staticClass:"text-right"},[e._v("\n    Cadastro Empresa\n    ")]),a("q-card-separator"),a("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[a("div",{staticClass:"col-12"},[a("q-field",{attrs:{count:75,helper:"Razão social da empresa","error-label":"Some error"}},[a("q-input",{attrs:{"float-label":"Razão Social",maxlength:"75"},model:{value:e.modelo.razao,callback:function(o){e.$set(e.modelo,"razao",o)},expression:"modelo.razao"}})],1)],1),a("div",{staticClass:"col-12"},[a("q-field",{attrs:{count:75,helper:"Nome Fantasia da empresa","error-label":"Some error"}},[a("q-input",{attrs:{"float-label":"Nome fantasia",maxlength:"75"},model:{value:e.modelo.fantasia,callback:function(o){e.$set(e.modelo,"fantasia",o)},expression:"modelo.fantasia"}})],1)],1),a("div",{staticClass:"col-xs-12 col-sm-6"},[a("q-field",{attrs:{count:18,helper:"CNPJ da empresa","error-label":"CNPJ Inválido",error:e.validacnpj}},[a("q-input",{directives:[{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],attrs:{type:"text","float-label":"CNPJ"},on:{blur:function(o){e.valida()}},model:{value:e.modelo.cnpj,callback:function(o){e.$set(e.modelo,"cnpj",o)},expression:"modelo.cnpj"}})],1)],1),a("div",{staticClass:"col-xs-12 col-sm-6"},[a("q-field",{attrs:{helper:"Selecione o responsável","error-label":"Some error"}},[a("q-select",{attrs:{options:e.responsaveis,disable:0===e.responsaveis.length,filter:"","autofocus-filter":"","float-label":"Responsável"},model:{value:e.modelo.responsavel,callback:function(o){e.$set(e.modelo,"responsavel",o)},expression:"modelo.responsavel"}})],1)],1),a("div",{staticClass:"col-xs-12 col-sm-6"},[a("q-field",{attrs:{helper:"Selecione o local de trabalho","error-label":"Some error"}},[a("q-select",{attrs:{value:e.modelo.local,options:e.locais,filter:"","autofocus-filter":"",disable:0===e.locais.length,"float-label":"Local de trabalho"},on:{change:function(o){e.modelo.local=o}}})],1)],1)]),a("div",{staticClass:"row q-pa-lg gutter-sm justify-center"},[a("div",{staticClass:"col-4"},[a("q-btn",{staticClass:"fit",attrs:{color:"primary"},on:{click:e.submit}},[e._v("Gravar")])],1),a("div",{staticClass:"col-4"},[a("q-btn",{staticClass:"fit",attrs:{color:"secondary"},on:{click:e.clear}},[e._v("Limpar")])],1)])],1)],1)},s=[];t._withStripped=!0;var i=a("vDqi"),l=a.n(i),n=a("oRr+"),r=a.n(n),c=a("6NC3"),p=a.n(c),d={data:function(){return{validacnpj:!1,funcLoad:!0,localLoad:!0,locais:[],url:"",text:"",visible:"one",responsaveis:[],modelo:{razao:"",fantasia:"",cnpj:"",responsavel:"",cpf:"",local:""},filter:"",loading:!1,serverPagination:{page:1,rowsNumber:10},serverData:[],columns:[{name:"razao",label:"Razão Social",field:"razao",align:"left"},{name:"cnpj",label:"CNPJ",field:"cnpj",align:"left"},{name:"edit",label:"Ação",align:"right",field:"edit"}]}},computed:{buttonColor:function(){return this.$q.screen.lt.md?"primary":"secondary"}},methods:{toggleVisibility:function(){this.visible=!this.visible},submit:function(){var e=this;this.validacnpj?this.$q.notify({color:"negative",position:"top",message:"Erro validação",icon:"report_problem"}):l()({baseURL:this.modelo.id?"https://estagio-back.herokuapp.com//empresa/"+this.modelo.id:"https://estagio-back.herokuapp.com//empresa",timeout:1e4,method:this.modelo.id?"PUT":"POST",withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"},data:JSON.stringify(this.modelo)}).then(function(o){e.request(),console.log(o),e.$q.notify({color:"positive",position:"top",message:"Gravado com sucesso",icon:"report_problem"}),e.clear()}).catch(function(o){o.response?(console.log(o.response.data),console.log(o.response.status),console.log(o.response.headers)):o.request?console.log(o.request):console.log("Error",o.message),console.log(o.config),e.$q.notify({color:"negative",position:"top",message:"Erro ao gravar",icon:"report_problem"})})},getlocal:function(){var e=this;l()({method:"get",url:"https://estagio-back.herokuapp.com//local",headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(o){e.locais=[];for(var a=JSON.parse(JSON.stringify(o.data)),t=0;t<a.length;t++){var s=a[t];e.locais.push({label:s.nome,value:s})}e.funcLoad=!1})},getresponsavel:function(){var e=this;l()({method:"get",url:"https://estagio-back.herokuapp.com//funcionario",headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(o){e.responsaveis=[];for(var a=JSON.parse(JSON.stringify(o.data)),t=0;t<a.length;t++){var s=a[t];e.responsaveis.push({label:s.nome,value:s})}e.funcLoad=!1})},clear:function(){this.modelo={razao:"",fantasia:"",cnpj:"",responsavel:"",cpf:"",local:""},this.validacnpj=!1,this.$q.notify({color:"positive",position:"top",message:"Formulário limpo",icon:"report_problem"})},fetchData:function(){},request:function(){var e=this;this.loading=!0,l.a.get("https://estagio-back.herokuapp.com//empresa").then(function(o){e.serverData=JSON.parse(JSON.stringify(o.data)),e.loading=!1}).catch(function(o){e.serverData=[{razao:"teste",cnpj:"1"}],console.log(o),e.loading=!1})},myFilter:function(e,o,a,t){var s=o?o.toLowerCase():"";return e.filter(function(e){return a.some(function(o){return-1!==(t(o,e)+"").toLowerCase().indexOf(s)})})},atualizaModel:function(e){this.visible="two",this.modelo=e;for(var o=0,a=!0;o<this.responsaveis.length&&a;o++)this.responsaveis[o].value.id===this.modelo.responsavel.id&&(this.modelo.responsavel=this.responsaveis[o].value,a=!1);for(var t=0,s=!0;t<this.locais.length&&s;t++)this.locais[t].value.id===this.modelo.local.id&&(this.modelo.local=this.locais[t].value,s=!1)},excluiModel:function(e){var o=this;this.$q.dialog({title:"Excluir",message:"Confirma a exclusão?.",ok:"Confirmo",cancel:"Cancelo"}).then(function(){l()({method:"delete",url:"https://estagio-back.herokuapp.com//empresa/"+e,headers:{"content-Type":"application/json",Accept:"application/json"}}).then(function(e){o.$q.notify({color:"positive",message:"Excluido com sucesso"}),o.request()}).catch(function(){o.$q.notify("Erro ao excluir!")})}).catch(function(){o.$q.notify({color:"positive",message:"Exclusão Cancelada..."})})},validacpf:function(){this.validacnpj=!r.a.isValid("346.184.588-44"),console.log(this.validacnpj)},valida:function(){this.validacnpj=!p.a.validate(this.modelo.cnpj),console.log(this.validacnpj)}},beforeMount:function(){this.getlocal(),this.getresponsavel(),this.fetchData(),this.request()}},u=d,f=(a("tUq8"),a("KHd+")),v=Object(f["a"])(u,t,s,!1,null,null,null);o["default"]=v.exports},akdX:function(e,o,a){},tUq8:function(e,o,a){"use strict";var t=a("akdX"),s=a.n(t);s.a}}]);